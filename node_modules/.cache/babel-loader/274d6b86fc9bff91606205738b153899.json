{"ast":null,"code":"import _regeneratorRuntime from\"/home/rafael/Documents/projects/Recipes-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/rafael/Documents/projects/Recipes-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/rafael/Documents/projects/Recipes-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/rafael/Documents/projects/Recipes-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/rafael/Documents/projects/Recipes-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/rafael/Documents/projects/Recipes-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/rafael/Documents/projects/Recipes-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{withRouter}from'react-router';import{connect}from'react-redux';import{Button,Form}from'react-bootstrap';import{executeFoodSearch,updateQuery,executeDrinkSearch,updateSelectedFilter}from'../redux/actions/searchBarActions';import{foodListSuccess}from'../redux/actions/foodActions';import{drinkListSuccess}from'../redux/actions/drinkActions';import'../SearchBar.css';var SearchBar=/*#__PURE__*/function(_Component){_inherits(SearchBar,_Component);var _super=_createSuper(SearchBar);function SearchBar(){var _this;_classCallCheck(this,SearchBar);_this=_super.call(this);_this.state={food:false};_this.handleSearchClick=_this.handleSearchClick.bind(_assertThisInitialized(_this));_this.checkResults=_this.checkResults.bind(_assertThisInitialized(_this));return _this;}_createClass(SearchBar,[{key:\"componentDidMount\",value:function componentDidMount(){this.checkHistory();}},{key:\"handleSearchClick\",value:function(){var _handleSearchClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$props,query,selectedFilter,executeSearchFoodAction,executeSearchDrinkAction,food;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=this.props,query=_this$props.query,selectedFilter=_this$props.selectedFilter,executeSearchFoodAction=_this$props.executeSearchFoodAction,executeSearchDrinkAction=_this$props.executeSearchDrinkAction;food=this.state.food;if(!(selectedFilter==='firstLetter'&&query.length!==1)){_context.next=5;break;}alert('Sua busca deve conter somente 1 (um) caracter');return _context.abrupt(\"return\");case 5:if(!food){_context.next=10;break;}_context.next=8;return executeSearchFoodAction(query,selectedFilter);case 8:_context.next=12;break;case 10:_context.next=12;return executeSearchDrinkAction(query,selectedFilter);case 12:this.checkResults();case 13:case\"end\":return _context.stop();}}},_callee,this);}));function handleSearchClick(){return _handleSearchClick.apply(this,arguments);}return handleSearchClick;}()},{key:\"checkResults\",value:function checkResults(){var _this$props2=this.props,searchResults=_this$props2.searchResults,history=_this$props2.history,saveFoodList=_this$props2.saveFoodList,saveDrinkList=_this$props2.saveDrinkList;var food=this.state.food;if(searchResults===null){console.log(searchResults);alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');return;}if(searchResults.length===1){if(food){history.push(\"/comidas/\".concat(searchResults[0].idMeal));}else{history.push(\"/bebidas/\".concat(searchResults[0].idDrink));}return;}if(food){saveFoodList(searchResults);}else{saveDrinkList(searchResults);}}},{key:\"checkHistory\",value:function checkHistory(){var history=this.props.history;this.setState({food:history.location.pathname.includes('comidas')});}},{key:\"render\",value:function render(){var _this2=this;var _this$props3=this.props,queryAction=_this$props3.queryAction,selectedFilterAction=_this$props3.selectedFilterAction,query=_this$props3.query,history=_this$props3.history;console.log(history.location.pathname.includes('comidas'));return/*#__PURE__*/React.createElement(Form,{className:\"searchBar\"},/*#__PURE__*/React.createElement(Form.Group,{class:\"mb-3\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",\"data-testid\":\"search-input\",placeholder:\"Fa\\xE7a sua pequisa\",value:query,onChange:function onChange(_ref){var target=_ref.target;return queryAction(target.value);}}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"search-ingredient\"},/*#__PURE__*/React.createElement(\"input\",{className:\"input\",name:\"filter\",id:\"search-ingredient\",value:\"ingredient\",type:\"radio\",\"data-testid\":\"ingredient-search-radio\",onChange:function onChange(){return selectedFilterAction('ingredient');}}),\"Ingrediente\"),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"search-nome\"},/*#__PURE__*/React.createElement(\"input\",{className:\"input\",name:\"filter\",id:\"search-nome\",value:\"name\",type:\"radio\",\"data-testid\":\"name-search-radio\",onChange:function onChange(){return selectedFilterAction('name');}}),\"Nome\"),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"search-first-letter\"},/*#__PURE__*/React.createElement(\"input\",{className:\"input\",name:\"filter\",id:\"search-first-letter\",value:\"firstLetter\",type:\"radio\",\"data-testid\":\"first-letter-search-radio\",onChange:function onChange(){return selectedFilterAction('firstLetter');}}),\"Primeira Letra\"),/*#__PURE__*/React.createElement(Button,{className:\"searchBar-button\",variant:\"outline-dark\",type:\"button\",\"data-testid\":\"exec-search-btn\",onClick:function onClick(){return _this2.handleSearchClick();}},\"Buscar\")));}}]);return SearchBar;}(Component);var mapStateToProps=function mapStateToProps(state){return{query:state.searchBarReducer.query,selectedFilter:state.searchBarReducer.selectedFilter,searchResults:state.searchBarReducer.searchResults};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{queryAction:function queryAction(query){return dispatch(updateQuery(query));},selectedFilterAction:function selectedFilterAction(filter){return dispatch(updateSelectedFilter(filter));},executeSearchFoodAction:function executeSearchFoodAction(query,filter){return dispatch(executeFoodSearch(query,filter));},executeSearchDrinkAction:function executeSearchDrinkAction(query,filter){return dispatch(executeDrinkSearch(query,filter));},saveFoodList:function saveFoodList(results){return dispatch(foodListSuccess(results));},saveDrinkList:function saveDrinkList(results){return dispatch(drinkListSuccess(results));}};};export default connect(mapStateToProps,mapDispatchToProps)(withRouter(SearchBar));","map":{"version":3,"sources":["/home/rafael/Documents/projects/Recipes-App/src/components/SearchBar.js"],"names":["React","Component","withRouter","connect","Button","Form","executeFoodSearch","updateQuery","executeDrinkSearch","updateSelectedFilter","foodListSuccess","drinkListSuccess","SearchBar","state","food","handleSearchClick","bind","checkResults","checkHistory","props","query","selectedFilter","executeSearchFoodAction","executeSearchDrinkAction","length","alert","searchResults","history","saveFoodList","saveDrinkList","console","log","push","idMeal","idDrink","setState","location","pathname","includes","queryAction","selectedFilterAction","target","value","mapStateToProps","searchBarReducer","mapDispatchToProps","dispatch","filter","results"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport { connect } from 'react-redux';\nimport { Button, Form } from 'react-bootstrap';\nimport PropTypes from 'prop-types';\nimport { executeFoodSearch, updateQuery, executeDrinkSearch,\n  updateSelectedFilter } from '../redux/actions/searchBarActions';\nimport { foodListSuccess } from '../redux/actions/foodActions';\nimport { drinkListSuccess } from '../redux/actions/drinkActions';\nimport '../SearchBar.css';\n\nclass SearchBar extends Component {\n  constructor() {\n    super();\n    this.state = {\n      food: false,\n    };\n    this.handleSearchClick = this.handleSearchClick.bind(this);\n    this.checkResults = this.checkResults.bind(this);\n  }\n\n  componentDidMount() {\n    this.checkHistory();\n  }\n\n  async handleSearchClick() {\n    const { query, selectedFilter, executeSearchFoodAction,\n      executeSearchDrinkAction } = this.props;\n    const { food } = this.state;\n    if (selectedFilter === 'firstLetter' && query.length !== 1) {\n      alert('Sua busca deve conter somente 1 (um) caracter');\n      return;\n    }\n    if (food) {\n      await executeSearchFoodAction(query, selectedFilter);\n    } else {\n      await executeSearchDrinkAction(query, selectedFilter);\n    }\n    this.checkResults();\n  }\n\n  checkResults() {\n    const { searchResults, history, saveFoodList, saveDrinkList } = this.props;\n    const { food } = this.state;\n    if (searchResults === null) {\n      console.log(searchResults);\n      alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');\n      return;\n    } if (searchResults.length === 1) {\n      if (food) {\n        history.push(`/comidas/${searchResults[0].idMeal}`);\n      } else {\n        history.push(`/bebidas/${searchResults[0].idDrink}`);\n      }\n      return;\n    }\n    if (food) {\n      saveFoodList(searchResults);\n    } else {\n      saveDrinkList(searchResults);\n    }\n  }\n\n  checkHistory() {\n    const { history } = this.props;\n    this.setState({\n      food: history.location.pathname.includes('comidas'),\n    });\n  }\n\n  render() {\n    const { queryAction, selectedFilterAction, query, history } = this.props;\n    console.log(history.location.pathname.includes('comidas'));\n    return (\n      <Form className=\"searchBar\">\n        <Form.Group class=\"mb-3\">\n          <Form.Control\n            type=\"text\"\n            data-testid=\"search-input\"\n            placeholder=\"Faça sua pequisa\"\n            value={ query }\n            onChange={ ({ target }) => queryAction(target.value) }\n          />\n          <label htmlFor=\"search-ingredient\">\n            <input\n              className=\"input\"\n              name=\"filter\"\n              id=\"search-ingredient\"\n              value=\"ingredient\"\n              type=\"radio\"\n              data-testid=\"ingredient-search-radio\"\n              onChange={ () => selectedFilterAction('ingredient') }\n            />\n            Ingrediente\n          </label>\n          <label htmlFor=\"search-nome\">\n            <input\n              className=\"input\"\n              name=\"filter\"\n              id=\"search-nome\"\n              value=\"name\"\n              type=\"radio\"\n              data-testid=\"name-search-radio\"\n              onChange={ () => selectedFilterAction('name') }\n            />\n            Nome\n          </label>\n          <label htmlFor=\"search-first-letter\">\n            <input\n              className=\"input\"\n              name=\"filter\"\n              id=\"search-first-letter\"\n              value=\"firstLetter\"\n              type=\"radio\"\n              data-testid=\"first-letter-search-radio\"\n              onChange={ () => selectedFilterAction('firstLetter') }\n            />\n            Primeira Letra\n          </label>\n          <Button\n            className=\"searchBar-button\"\n            variant=\"outline-dark\"\n            type=\"button\"\n            data-testid=\"exec-search-btn\"\n            onClick={ () => this.handleSearchClick() }\n          >\n            Buscar\n          </Button>\n\n        </Form.Group>\n\n      </Form>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  query: state.searchBarReducer.query,\n  selectedFilter: state.searchBarReducer.selectedFilter,\n  searchResults: state.searchBarReducer.searchResults,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  queryAction: (query) => dispatch(updateQuery(query)),\n  selectedFilterAction: (filter) => dispatch(updateSelectedFilter(filter)),\n  executeSearchFoodAction: (query, filter) => dispatch(executeFoodSearch(query, filter)),\n  executeSearchDrinkAction:\n   (query, filter) => dispatch(executeDrinkSearch(query, filter)),\n  saveFoodList: (results) => dispatch(foodListSuccess(results)),\n  saveDrinkList: (results) => dispatch(drinkListSuccess(results)),\n});\n\nSearchBar.propTypes = {\n  history: PropTypes.Object,\n}.isRequired;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(SearchBar));\n"]},"metadata":{},"sourceType":"module"}