{"ast":null,"code":"import _toConsumableArray from\"/home/rafael/Documents/projects/Recipes-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/rafael/Documents/projects/Recipes-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/rafael/Documents/projects/Recipes-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/rafael/Documents/projects/Recipes-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/rafael/Documents/projects/Recipes-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/rafael/Documents/projects/Recipes-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import{connect}from'react-redux';import'../RecipesInProgress.css';import Button from'react-bootstrap/Button';import{saveDoneRecipe}from'../redux/actions/foodActions';var IngredientsFoodInProgress=/*#__PURE__*/function(_Component){_inherits(IngredientsFoodInProgress,_Component);var _super=_createSuper(IngredientsFoodInProgress);function IngredientsFoodInProgress(){var _this;_classCallCheck(this,IngredientsFoodInProgress);_this=_super.call(this);_this.state={ingredientsArrayList:[0]};_this.handleOnchange=_this.handleOnchange.bind(_assertThisInitialized(_this));_this.saveInLocalStorage=_this.saveInLocalStorage.bind(_assertThisInitialized(_this));return _this;}_createClass(IngredientsFoodInProgress,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var foodDetails=this.props.foodDetails;if(!Object.is(prevProps.foodDetails,foodDetails)){this.markedBox();}}},{key:\"handleOnchange\",value:function handleOnchange(_ref){var _this2=this;var target=_ref.target;var checked=target.checked,value=target.value;if(checked){this.setState(function(previousState){return{ingredientsArrayList:[].concat(_toConsumableArray(previousState.ingredientsArrayList),[Number(value)])};},function(){return _this2.saveInLocalStorage();});}else{this.setState(function(previousState){return{ingredientsArrayList:previousState.ingredientsArrayList.filter(function(box){return box!==Number(value);})};},function(){return _this2.saveInLocalStorage();});}}},{key:\"saveInLocalStorage\",value:function saveInLocalStorage(){var foodDetails=this.props.foodDetails;var ingredientsArrayList=this.state.ingredientsArrayList;var inProgressRecipes=JSON.parse(localStorage.getItem('inProgressRecipes'));if(!inProgressRecipes){inProgressRecipes={cocktails:{},meals:{}};}inProgressRecipes.meals[foodDetails.idMeal]=ingredientsArrayList;localStorage.setItem('inProgressRecipes',JSON.stringify(inProgressRecipes));}// ableButton(){\n// }\n},{key:\"markedBox\",value:function markedBox(){var foodDetails=this.props.foodDetails;var inProgressRecipes=JSON.parse(localStorage.getItem('inProgressRecipes'));if(inProgressRecipes&&Object.keys(inProgressRecipes.meals).find(function(meal){return Number(meal)===Number(foodDetails.idMeal);})){this.setState({ingredientsArrayList:inProgressRecipes.meals[foodDetails.idMeal]});}else{this.setState({ingredientsArrayList:[]});}}},{key:\"saveInDoneRecipes\",value:function saveInDoneRecipes(){}},{key:\"render\",value:function render(){var _this3=this;console.log('qualquer coisa');var _this$props=this.props,foodDetails=_this$props.foodDetails,saveDoneRecipesAction=_this$props.saveDoneRecipesAction;var ingredientsArrayList=this.state.ingredientsArrayList;var ingredients=[];var measurements=[];var array=Array.of(Object.entries(foodDetails));if(array[0].length>0){ingredients=array[0].filter(function(item){return item[0].includes('strIngredient');}).filter(function(item){return item[1];}).map(function(item){return item[1];});measurements=array[0].filter(function(item){return item[0].includes('strMeasure');}).filter(function(item){return item[1];}).map(function(item){return item[1];});}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"ul\",null,ingredients.map(function(item,index){return item?/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\".concat(index,\"-check-ingredients\"),className:ingredientsArrayList.some(function(ingredient){return ingredient===index;})?'checked-button':'',key:index,\"data-testid\":\"\".concat(index,\"-ingredient-step\")},/*#__PURE__*/React.createElement(\"input\",{className:\"checkbox\",type:\"checkbox\",checked:ingredientsArrayList.some(function(ingredient){return ingredient===index;})// checked={ item.checked }\n,onChange:_this3.handleOnchange,value:index,id:\"\".concat(index,\"-check-ingredients\")}),\"\".concat(item,\" - \").concat(measurements[index])):'';})),/*#__PURE__*/React.createElement(Link,{to:\"/receitas-feitas\"},/*#__PURE__*/React.createElement(Button,{className:\"finish-recipe btn btn-warning\",\"data-testid\":\"finish-recipe-btn\",disabled:ingredientsArrayList.length!==ingredients.length,onClick:function onClick(){return saveDoneRecipesAction(foodDetails.idMeal);}},' ',\"Finalizar Receita\")));}}]);return IngredientsFoodInProgress;}(Component);var mapStateToProps=function mapStateToProps(state){return{foodDetails:state.foodReducer.foodDetails};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{saveDoneRecipesAction:function saveDoneRecipesAction(id){return dispatch(saveDoneRecipe(id));}};};export default connect(mapStateToProps,mapDispatchToProps)(IngredientsFoodInProgress);","map":{"version":3,"sources":["/home/rafael/Documents/projects/Recipes-App/src/components/IngredientsFoodInProgress.js"],"names":["React","Component","Link","connect","Button","saveDoneRecipe","IngredientsFoodInProgress","state","ingredientsArrayList","handleOnchange","bind","saveInLocalStorage","prevProps","foodDetails","props","Object","is","markedBox","target","checked","value","setState","previousState","Number","filter","box","inProgressRecipes","JSON","parse","localStorage","getItem","cocktails","meals","idMeal","setItem","stringify","keys","find","meal","console","log","saveDoneRecipesAction","ingredients","measurements","array","Array","of","entries","length","item","includes","map","index","some","ingredient","mapStateToProps","foodReducer","mapDispatchToProps","dispatch","id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport '../RecipesInProgress.css';\nimport Button from 'react-bootstrap/Button';\nimport { saveDoneRecipe } from '../redux/actions/foodActions';\n\nclass IngredientsFoodInProgress extends Component {\n  constructor() {\n    super();\n    this.state = {\n      ingredientsArrayList: [0],\n    };\n    this.handleOnchange = this.handleOnchange.bind(this);\n    this.saveInLocalStorage = this.saveInLocalStorage.bind(this);\n  }\n\n  componentDidUpdate(prevProps) {\n    const { foodDetails } = this.props;\n    if (!Object.is(prevProps.foodDetails, foodDetails)) {\n      this.markedBox();\n    }\n  }\n\n  handleOnchange({ target }) {\n    const { checked, value } = target;\n    if (checked) {\n      this.setState((previousState) => ({\n        ingredientsArrayList: [...previousState.ingredientsArrayList, Number(value)],\n      }), () => this.saveInLocalStorage());\n    } else {\n      this.setState((previousState) => ({\n        ingredientsArrayList: previousState.ingredientsArrayList\n          .filter((box) => box !== Number(value)),\n      }), () => this.saveInLocalStorage());\n    }\n  }\n\n  saveInLocalStorage() {\n    const { foodDetails } = this.props;\n    const { ingredientsArrayList } = this.state;\n    let inProgressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    if (!inProgressRecipes) {\n      inProgressRecipes = {\n        cocktails: {},\n        meals: {},\n      };\n    }\n    inProgressRecipes.meals[foodDetails.idMeal] = ingredientsArrayList;\n    localStorage.setItem('inProgressRecipes', JSON.stringify(inProgressRecipes));\n  }\n\n  // ableButton(){\n\n  // }\n\n  markedBox() {\n    const { foodDetails } = this.props;\n    const inProgressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    if (inProgressRecipes && Object.keys(inProgressRecipes.meals)\n      .find((meal) => Number(meal) === Number(foodDetails.idMeal))) {\n      this.setState({\n        ingredientsArrayList: inProgressRecipes.meals[foodDetails.idMeal],\n      });\n    } else {\n      this.setState({\n        ingredientsArrayList: [],\n      });\n    }\n  }\n\n  saveInDoneRecipes() {\n\n  }\n\n  render() {\n    console.log('qualquer coisa');\n    const { foodDetails, saveDoneRecipesAction } = this.props;\n    const { ingredientsArrayList } = this.state;\n    let ingredients = [];\n    let measurements = [];\n    const array = Array.of(Object.entries(foodDetails));\n    if (array[0].length > 0) {\n      ingredients = array[0].filter((item) => item[0].includes('strIngredient'))\n        .filter((item) => item[1]).map((item) => (item[1]));\n      measurements = array[0].filter((item) => item[0].includes('strMeasure'))\n        .filter((item) => item[1]).map((item) => item[1]);\n    }\n    return (\n      <>\n        <ul>\n          { ingredients\n            .map((item, index) => (item\n              ? (\n                <label\n                  htmlFor={ `${index}-check-ingredients` }\n                  className={ ingredientsArrayList\n                    .some((ingredient) => ingredient === index) ? 'checked-button' : '' }\n                  key={ index }\n                  data-testid={ `${index}-ingredient-step` }\n                >\n                  <input\n                    className=\"checkbox\"\n                    type=\"checkbox\"\n                    checked={ ingredientsArrayList\n                      .some((ingredient) => ingredient === index) }\n                    // checked={ item.checked }\n                    onChange={ this.handleOnchange }\n                    value={ index }\n                    id={ `${index}-check-ingredients` }\n                  />\n                  {`${item} - ${measurements[index]}`}\n                </label>\n              )\n              : ''))}\n        </ul>\n        <Link to=\"/receitas-feitas\">\n          <Button\n            className=\"finish-recipe btn btn-warning\"\n            data-testid=\"finish-recipe-btn\"\n            disabled={ ingredientsArrayList.length !== ingredients.length }\n            onClick={ () => saveDoneRecipesAction(foodDetails.idMeal) }\n          >\n            {' '}\n            Finalizar Receita\n          </Button>\n        </Link>\n      </>);\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  foodDetails: state.foodReducer.foodDetails,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  saveDoneRecipesAction: (id) => dispatch(saveDoneRecipe(id)),\n});\n\nIngredientsFoodInProgress.propTypes = {\n  foodDetails: PropTypes.shape({\n    strMealThumb: PropTypes.string,\n    strMeal: PropTypes.string,\n    strCategory: PropTypes.string,\n    strInstructions: PropTypes.string,\n    strYoutube: PropTypes.string,\n    idMeal: PropTypes.string,\n  }),\n  saveDoneRecipesAction: PropTypes.func,\n}.isRequired;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(IngredientsFoodInProgress);\n"]},"metadata":{},"sourceType":"module"}